<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Socket.IO Chat Example</title>
  <link rel="stylesheet" href="./css/style.css">
</head>
<body>
  <main>
    <ul class="pages isRoom">
      <li class="page--room page">
        <div class="page--room__header">
          <h3 class="title">Make new room?</h3>
          <input class="form" type="text" placeholder="Type here...">
        </div>
        <ul class="page--room__body rooms">
          <li class="room"><a data-room="n1">my room No.1</a></li>
          <li class="room"><a data-room="n2">my room No.2</a></li>
          <li class="room"><a data-room="n3">my room No.3</a></li>
        </ul>
      </li>
      <li class="page--chat page">
        <h3 class="title">Chat room</h3>
        <ul class="messages"></ul>
      </li>
    </ul>
  </main>
  <script src="./js/socket.io.js"></script>
  <script src="./js/jquery.min.js"></script>
  <script src="./js/main.bundle.js"></script>
  <script>
    const socket = io();
    $(".room a").on("click",e => {
      $(".page--room").fadeOut().next().fadeIn();
      const target = e.currentTarget;
      const room = $(target).data("room");
      const roomName = $(target).text();
      $(".page--chat .title").text(roomName);
      socket.emit("join room",{room: room});
    })

    socket.on("join",username => {
      const $li = $("<li>").addClass("message join-exit");
      $li.text(`${username}さんが参加`);
      $(".messages").append($li);
    });
  </script>
</body>
</html>